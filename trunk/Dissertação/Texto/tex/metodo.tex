\newpage

\chapter{Método}
\label{capitulo_metodo}

%\section{Considerações Iniciais}

\lettrine[lines=3]{N}\ este capítulo será apresentado o método para a realização do trabalho e o cronograma de atividades previsto.


% \color{red}
% - Mostrar minha arquitetura (ver caderno azul).
% - Falar da webdia?
% - Falar da Revisão Sistemática, das maquinas de busca e etc?? E mostrar que ela nao estava sendo tão eficiente (antes: pegar um artigo importante e jogar no scopus). Posso jogar a mesma string e ver quantos artigos aumentaram.
% \normalcolor

\section{Método}
\label{metodo}

São previstas cinco atividades que  serão responsáveis por estender um ambiente colaborativo web (CMS\footnote{Neste capítulo, será simplificado o termo ambiente colaborativo web, podendo ser um Wiki, um CMS ou um intraCMS - ver Seção \ref{sis_ger_cont} - para CMS, por ser um termo mais abrangente; contudo, é importante ressaltar que ainda não está definido o tipo de CMS a ser usado no trabalho.}) de tal forma que possibilite o desenvolvimento colaborativo orientado a modelos. As atividades deverão compor a prova de conceito a ser desenvolvida.

Para testar o ambiente serão realizados dois estudos de caso: um no domínio de sistemas de TI e outro no domínio de sistemas embarcados. A intenção de realizar dois estudos de caso é levantar características (vantagens, desvantagens e singulariedades) que a colaboração pode trazer para cada um desses domínios e depois compará-los entre si. Deste modo, espera-se que com a execução do método e com a realização dos estudos de caso, seja validada a hipótese de pesquisa deste trabalho. 

\subsection{Inclusão de Suporte à Metamodelagem}
\label{suporteMetamodelagem}

Um modelo, no contexto deste projeto, é uma especificação abstrata de um conceito, e pode surgir a partir das atividades de análise, projeto ou implementação. Neste sentido, um modelo pode ser visual, como por exemplo um diagrama de classes ou de estados, ou mesmo textual, como por exemplo uma especificação formal. Para que um modelo possa servir de entrada para um transformador ou um gerador, é necessária uma estrutura que defina seus elementos, relacionamentos, e as informações contidas no modelo.

Esta estrutura é também conhecida como metamodelo \cite{Muthig2002}. Um gerador ou transformador precisa conhecer o metamodelo para poder executar sua função. Enquanto muitas ferramentas suportam apenas um número fixo de metamodelos (tais como as ferramentas UML, que somente suportam o metamodelo da UML), no desenvolvimento orientado a modelos é desejável a existência de diferentes metamodelos, para dar suporte às DSLs \cite{Blois2005}, tornando a atividade de modelagem mais flexível e natural para os desenvolvedores e especialistas do domínio.

Esta atividade tem como objetivo oferecer o suporte à metamodelagem no ambiente colaborativo web. Marcações especiais simplificadas permitem que o usuário formate o texto de forma mais intuitiva e eficiente, sem a necessidade de conhecer comandos específicos de uma linguagem de formatação, como HTML, por exemplo. Um exemplo é a quebra de linha: em HTML, as quebras de linha inseridas no código são ignoradas, sendo necessário incluir o comando \verb#<br>#, enquanto uma Wiki, por exemplo, mantém automaticamente as quebras inseridas.

%O suporte à metamodelagem irá seguir esta mesma filosofia. 
Para isso, três principais funções serão incluídas, conforme ilustra a Figura \ref{fig:suporteMetamodelo}.

\begin{figure}[htb]
	\centering
		\includegraphics[width=0.6\textwidth]{imagens/suporteMetamodelo.png}
	\caption{Suporte à metamodelagem em uma Wiki}
	\label{fig:suporteMetamodelo}
\end{figure}

Na \textit{primeira função}, o CMS estendido irá permitir que especialistas do domínio criem descrições do metamodelo em forma de marcações (\textit{tags}) a serem inseridas no texto. Estas descrições especificam quais são as \textit{tags} existentes para um domínio, e como elas se relacionam entre si (ex: uma \textit{tag} deve estar contida em outra, uma \textit{tag} A deve vir após outra \textit{tag} B, etc).

A \textit{segunda função} será a inserção das \textit{tags} definidas pelo especialista em um texto qualquer. Um desenvolvedor utiliza as \textit{tags} disponíveis em determinadas partes do texto, enriquecendo-o com informações específicas daquele domínio. A \textit{terceira função} deste CMS estendido é interpretar este texto, enriquecido com base nas \textit{tags} do domínio (metamodelo).

O resultado destas funções é que o texto marcado pelo desenvolvedor passa a ser um modelo específico de domínio, passível de interpretação automática, o que possibilita, por exemplo, a geração de código, geração de outros modelos, análises automáticas, va\-li\-da\-ção, otimizações, etc. Além disso, este modelo específico de domínio está situado em um ambiente colaborativo, permitindo que estas operações sejam executadas diretamente na Wiki.

A Figura \ref{fig:suporteMetamodelo} mostra o especialista do domínio definindo o metamodelo do domínio. O metamodelo descreve o significado das \textit{tags}, e como elas se relacionam. Deste modo, o mecanismo de suporte à metamodelagem irá prover meios para inserção das \textit{tags} no texto, assim como uma forma para ler/interpretar o seu conteúdo, numa preparação para a subseqüente geração de código e/ou transformações. Isso possibilita que os desenvolvedores utilizam uma Wiki, por exemplo, para criar os modelos de forma colaborativa.

%Os desenvolvedores utilizam a Wiki para criar os modelos de forma colaborativa. A princípio, somente modelos textuais serão considerados. A extensão irá permitir a inclusão de \textit{tags} específicas para o domínio, fazendo a ligação entre o texto e o metamodelo, que é desenvolvido em conjunto com um especialista do domínio. O metamodelo descreve o significado das \textit{tags}, e como as mesmas se relacionam.

%O mecanismo de suporte à metamodelagem irá prover meios para inserção das \textit{tags} no texto, assim como uma forma para ler/interpretar o seu conteúdo, numa preparação para a subseqüente geração de código e/ou transformações.

\subsection{Suporte à Geração de Código}
\label{suporteGeracaoDeCodigo}

Uma vez que modelos com as marcações (\textit{tags}) estejam disponíveis, é possível ler/ interpretar os modelos e realizar diferentes operações automáticas tais como transformações, otimizações ou validação. Porém, uma das principais operações a serem realizadas é a transformação modelo-para-texto, ou geração de código. Este é o objetivo desta atividade.

\begin{figure}[htb]
	\centering
		\includegraphics[width=1.0\textwidth]{imagens/transformacoes.png}
	\caption{Suporte à geração de código}
	\label{fig:transformacoes}
\end{figure}

A transformação de modelo para código é desenvolvida por um especialista (normalmente com conhecimento do metamodelo e da plataforma de implementação), e é responsável por interpretar os dados do modelo, de acordo com o metamodelo, e gerar texto de saída.

A construção das transformações é facilitada pelo suporte à metamodelagem desenvolvido na atividade anterior. Através dele, o desenvolvedor da transformação pode definir regras de mapeamento entre os elementos do metamodelo e o código final desejado.

A Figura \ref{fig:transformacoes} ilustra um desenvolvedor de transformações definindo uma transformação com base no metamodelo, para possibilitar a geração de código.

\subsection{Extensão da Interface}
\label{extensaoInterface}

Nesta atividade, a interface será estendida para incluir as funções de:

\begin{itemize}
\item Criação/edição de metamodelos;
\item Inserção de \textit{tags} do metamodelo em documentos; e
\item Execução/chamada das transformações.
\end{itemize}

A idéia é que, no mesmo ambiente, os desenvolvedores possam criar/editar/visualizar os modelos e metamodelos, e gerar o código correspondente.

A princípio, a criação das transformações será feita fora do ambiente, sendo possivelmente integrada em um trabalho futuro.

\subsection{Controle de Versão}
\label{controleDeVersao}

Um sistema de controle de versão ou controle de revisões é parte do conhecido gerenciamento de configuração de software (SCM - \textit{Software Configuration Management}). É uma ferramenta que ajuda no gerenciamento de múltiplas revisões do código. O SCM automatiza o armazenamento, recuperação, registro, identificação e \textit{merge} das revisões e fornece controle de acesso. É útil para textos que são revisados com freqüência, como por exemplo softwares e documentação \cite{Tichy1982}.

Como mencionado na Seção \ref{requisitos}, um repositório de controle de versão %\footnote{o CoMDD será também um repositório pois irá armazenar os modelos}
é importante para se manter um histórico de desenvolvimento, facilitando a manutenção e evolução do sistema com base no seu passado. É importante também para compartilhar o que está sendo desenvolvido pela equipe de maneira organizada e disciplinada. É relevante destacar que o controle de versão do CoMDD irá apoiar a captura de \textit{Design Rationale} - DR. % (\textcolor{red}{\huge{todo DR precisa de um controle de versão??}}}

Para realização desta atividade, será usado a ferramenta de controle de versão Phoca. A Phoca foi desenvolvida pelo grupo e está sob a licença de código aberto Apache versão 2\footnote{http://www.apache.org/licenses/LICENSE-2.0.html}. O diferencial dela consiste em oferecer uma API para o controle de versões de artefatos de software na forma de documentos estruturados (XML, por exemplo). Portanto, esta atividade consiste na implementação da Phoca no CoMDD. 


\subsection{Controle de Permissão de Acesso}
\label{controleDePermissao}

O desenvolvimento de um sistema é comumente dividido em diversas etapas de tal forma que pessoas (ou grupos de pessoas) diferentes são responsáveis por realizarem tarefas diferentes. Por exemplo, supondo um ambiente de desenvolvimento de um sistema qualquer, que será realizado por dois grupos: o grupo A (GA) e o grupo B (GB). O GA terá que implementar a funcionalidade X e o GB a funcionalidade Y. Pode ser um requisito do projeto o GA não poder alterar\footnote{Alterar pode ter o significado tanto de alterar algum modelo quanto de alterar um documento em branco, ou seja, criar uma primeira versão de um modelo.} a implementação do GB e vice-versa. Portanto neste contexto, o controle de permissão de acesso no ambiente de desenvolvimento se torna uma funcionalidade fundamental.

Um outro ponto importante quanto à permissão de alteração de modelos é que um dos grupos não pode alterar as versões anteriores de seus próprios modelos, ou seja, se o GA criou um modelo (versão 1.0) e no dia seguinte o modificou, essa alteração passa então a ser uma outra versão do modelo (versão 1.1) de forma que a versão 1.0 ficou ``inalterada''. Trata-se de um controle também essencial  para se manter um histórico dos modelos e assim apoiar o registro de decisões de projeto (DR). Nesse contexto, é um requisito do CoMDD  fornecer permissões de acesso diferentes para diferentes pessoas.

% Essa atividade foi inserida como uma sub-atividade de \ref{controleDeVersao}, pois ainda não ser[a avaliado se o controle de permissão será implementado a partir da Phoca ou não.

\subsection{Suporte ao Conhecimento das Decisões}
\label{suporteDR}

\cite{Gruber1991} define \textit{Desgin Rationale} (DR) como sendo explicações. Elas explicam as relações entre a estrutura, comportamento e as funções dos artefatos, tais como a maneira que a estrutura implementa uma função, ou como o comportamento emerge da estrutura. Eles também explicam a tomada de decisão do processo. Este segundo tipo de \textit{rationale} é baseado no histórico das decisões de \textit{design}, descrevendo como as alternativas foram consideradas e avaliadas e como as decisões foram tomadas ao longo do tempo. 

Para \cite{Souza1999}, a informação armazenada no DR é muito útil em diversas maneiras como: colaboração, manutenção, aprendizagem, etc; além de trazer grandes benefícios para o reúso; na comunicação entre membros da equipe, principalmente para os mais recentes; para encontrar erros no desenvolvimento e na solução de problemas de uma maneira geral; entre outros \cite{Souza1999}. 

Para permitir que o projeto suporte razões de decisão, será implementado no CoMDD um trabalho já desenvolvido pelo grupo de pesquisa: a DocRat \cite{Lara2005}. A DocRat é uma ferramenta CASE com o intuito de registrar decisões de projeto de maneira menos intrusiva ao usuário.

O trabalho desta atividade é importar o que foi desenvolvido na DocRat, fazendo seu relacionamento com o CoMDD de forma que haja um sincronismo entre a modelagem e as anotações das razões.

\subsection{Execução de Estudo de Caso I - Domínio de TI}
\label{estudoDeCasoI}

Uma vez que os componentes do ambiente estejam integrados, será realizado um estudo de caso para validar o mesmo, identificar pontos fortes/fracos, e possibilidades de me\-lho\-rias.

O estudo de caso I envolverá o domínio de TI, em especial os diagramas ER (Entidade-Relacionamento), conforme ilustra a Figura \ref{fig:estudoCaso}:

\begin{figure}[htb]
	\centering
		\includegraphics[width=0.9\textwidth]{imagens/estudoCaso.png}
	\caption{Estudo de caso do domínio de TI}
	\label{fig:estudoCaso}
\end{figure}

Inicialmente, será definido um metamodelo para representar tabelas, colunas e relacionamentos, como um esquema de banco de dados. As \textit{tags} deste metamodelo serão inseridas em um texto descrevendo dados (modelo), identificando o tipo de cada elemento.

Com base nestas informações, e com o auxílio do suporte de metamodelagem, será definida uma transformação para gerar \textit{scripts SQL} correspondentes aos modelos.

Como resultado, será possível definir um esquema de banco de dados em um modelo, e obter automaticamente seus \textit{scripts}. Adicionalmente, os modelos de entrada ficarão disponíveis no CMS, podendo ser editados por diferentes desenvolvedores. A execução das transformações também será executada no CMS, não exigindo a instalação de ne\-nhu\-ma ferramenta nas estações de trabalho dos desenvolvedores.

É importante ressaltar que as maiores contribuições desse trabalho em termos de desenvolvimento são os itens \ref{suporteMetamodelagem}, \ref{suporteGeracaoDeCodigo}, \ref{extensaoInterface}, \ref{controleDePermissao}  e \ref{estudoDeCasoI}, pois os itens \ref{suporteDR} e \ref{controleDeVersao}, como mencionado, são adaptações de trabalhos anteriores.


\subsection{Execução de Estudo de Caso II - Domínio de SE}
\label{estudoDeCasoII}

No caso do domínio de sistemas embarcados (SE) será definido um metamodelo para representar diagramas de transição de estados (DTE) para robô móvel autônomo (RMA). O DTE para o robô especifica que ele terá que seguir uma linha preta no chão e parar quando encontrar um obstáculo, seu estado final. Como estados, tem-se: estado final ou em movimento. Como transições, tem-se \textit{ir para frente}, \textit{ir para esquerda}, \textit{ir para direita} e \textit{parar}.

Com base nestas informações, e com o auxílio do suporte de metamodelagem, será definida uma transformação para gerar comandos para o robô, correspondentes aos modelos.

Como resultado, será possível definir um percurso a ser seguido pelo robô e obter automaticamente seus comandos para serem transmitidos ao robô. Adicionalmente, os modelos de entrada ficarão disponíveis no CMS, podendo ser editados por diferentes desenvolvedores. A execução das transformações também será executada no CMS, não exigindo a instalação de ne\-nhu\-ma ferramenta nas estações de trabalho dos desenvolvedores.

A Figura \ref{fig:estudoDeCasoII} ilustra um possíve modelo a ser implementado a partir do metamodelo. O RMA começa inicialmente desligado. Ao ser ligado ele vai para o estado Parado. Caso ele detecte em todos seus sensores a presença da pista, ele vai para Frente. No estado Frente, ele pode ir para Direita ou para Esquerda, caso saia da pista pela esquerda ou pela direita, respectivamente. A partir de todos os estados (com exceção do Parado) ele pode ir para o estado Parado, caso saia da pista, ou para o Estado Final, caso encontre seu destino.

\begin{figure}[htb]
	\centering
		\includegraphics[width=0.8\textwidth]{imagens/estudoDeCasoII.jpg}
	\caption{Exemplo do DTE para o Estudo de caso do domínio de Sistemas Embarcados}
	\label{fig:estudoDeCasoII}
\end{figure}


\section{Cronograma}
\label{cronograma}
O cronograma de execução das atividades é apresentado na Tabela \ref{tab:cronograma}. O projeto tem duração prevista de 24 meses e a tabela segue a redefinição do número das atividades conforme abaixo: \newline

\begin{enumerate}
 \item Cumprimento dos Créditos Exigidos;
 \item Exame de Inglês;
 \item Revisão Bibliográfica;
 \item Exame de Qualificação;
 \item Inclusão de Suporte à Metamodelagem;
 \item Suporte à Geração de Código
 \item Extensão da Interface;
 \item Controle de Versão e de Permissão;
 \item Suporte ao Conhecimento das Razões;
 \item Execução de Estudo de Caso I e II ;
 \item Redação da Dissertação;
 \item Redação de Artigos;
 \item Defesa.
\end{enumerate}

\begin{table}[!htp]
\small
\centering

\begin{tabular}{|c|c|c|c|c|c|c|c|c|c|c|c|c|c|}

\hline

& \multicolumn{5}{|c|}{{\bf 2009}} & \multicolumn{6}{|c|}{{\bf 2010}} & \multicolumn{2}{|c|}{{\bf 2011}}\\

\cline{2-14}
%Arrumar
\raisebox{0.0ex}[0pt][0pt]{\scriptsize{\textbf{Ativ.}}} & {\bf \scriptsize{Mar/}} & {\scriptsize{\bf Mai/}} & {\scriptsize{\bf Jul/}} & \scriptsize{{\bf Set/}} & \scriptsize{{\bf Nov/}} & \scriptsize{{\bf Jan/}} & \scriptsize{{\bf Mar/}} & \scriptsize{{\bf Mai/}} & \scriptsize{{\bf Jul/}} & \scriptsize{{\bf Set/}} & \scriptsize{{\bf Nov/}} & \scriptsize{{\bf Jan/}} & \scriptsize{{\bf Mar/}}\\
 & \scriptsize{{\bf Abr}} & \scriptsize{{\bf Jun}} & \scriptsize{{\bf Ago}} & \scriptsize{{\bf Out}} & \scriptsize{{\bf Dez}} & \scriptsize{{\bf Fev}} & \scriptsize{{\bf Abr}} & \scriptsize{{\bf Jun}} & \scriptsize{{\bf Ago}} & \scriptsize{{\bf Out}} & \scriptsize{{\bf Dez}} & \scriptsize{{\bf Fev}} & \scriptsize{{\bf Abr}}\\

\hline \hline

\footnotesize{1} & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & & & & & & & &\\

\hline

\footnotesize{2} & & & & &$\bullet$  & & & & & & & &\\

\hline

\footnotesize{3} & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & & \\

\hline

\footnotesize{4} & & & & & & $\bullet$ & $\bullet$ & & & & & &\\

\hline

\footnotesize{5} & & & & & & & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & & &\\

\hline

\footnotesize{6} & & & & & & & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & & &\\

\hline

\footnotesize{7} & & & & & & & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & & &\\

\hline

\footnotesize{8} & & & & & & & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & & &\\

\hline

\footnotesize{9} & & & & & & & $\bullet$ & $\bullet$ & $\bullet$ & $\bullet$ & & &\\

\hline

\footnotesize{10} & & & & & & & & & & & $\bullet$ & $\bullet$&\\

\hline

\footnotesize{11} & & & & & & & & & & & $\bullet$ & $\bullet$&\\

\hline

\footnotesize{12} & & & & & & & $\bullet$ & & & & $\bullet$& $\bullet$ & $\bullet$\\

\hline

\footnotesize{13} & & & & & & & & & & & & & $\bullet$ \\


\hline


\end{tabular}

\caption{Cronograma de Atividades} \label{tab:cronograma}

\end{table}

\section{Considerações Finais}

 Este trabalho prevê o desenvolvimento da abordagem CoMDD e, para tanto,  a realização de cinco atividades: inclusão de suporte à metamodelagem; suporte à geração de código; extensão da interface; controle de versão e de permissão aos diferentes tipos de colaboradores, e suporte ao conhecimento das decisões de projetos dos modelos. 

Essas atividades são planejadas para serem  concluídas de acordo com o cronograma da tabela \ref{tab:cronograma}.
